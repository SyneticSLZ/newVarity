
<!DOCTYPE html>
<html lang="en">
	<head>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="checkout.js"></script>
    <link rel="stylesheet" href="index.css"></link>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <!-- <meta charset="UTF-8"> -->
    <meta name="google-signin-client_id" content="73748507210-befn87uscvndhunjb21m0utaa9p12ojh.apps.googleusercontent.com.apps.googleusercontent.com">
    <title>VarityÂ® | Luxury Futurism style clothing</title>
    <link rel="icon" type="image/png" href="images/man.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-...your-sha512-here..." crossorigin="anonymous" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" integrity="sha512-...your-sha512-here..." crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
	<script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
	<body>
    <div id="overlay1">
      <form id="payment-form">
        <div id="express-checkout-element"></div>
        <h3>Contact info</h3>
        <div id="link-authentication-element"></div>
      
        <h3>Shipping</h3>
        <div id="address-element"></div>

        <h3>Payment</h3>
        <div id="payment-element"></div>
      
        <button id="submit">Submit</button>
      </form>
    </div> 
<script>



let stripePromise;
const getStripe = () => {
  if (!stripePromise) {
    // Ensure to replace 'your_publishable_key' with your actual Stripe public key
    stripePromise = Stripe('pk_test_51MNx4UKJeZAyw8f4z0YJFRQozQsqzwCBKOuzaSScWRXgDDG8GW9YH3qyrI9UZlUW1V8RXkieoHgqoaMOtIbxlLSm00QDD02K7W');
  }
  return stripePromise;
};

const redirectToCheckout = async () => {
  console.log("Redirecting to Checkout...");
  const stripe = getStripe();
  
//   const cartItems = JSON.parse(localStorage.getItem('cart'));
//   const item = cartItems.map(item => ({
//     price: item.id, // Use the item's 'id' as the Stripe Price ID
//     quantity: item.quantity
//   }));
// console.log(item)
//   // const item = {
//   //   price: "price_1NOjCxKJeZAyw8f4vRllvFVn",
//   //   quantity: 1
//   // };
// const array = []

// console.log(item.push(array))

  // Fetch your cart from local storage
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  
  // Prepare lineItems from the cart object
  const lineItems = cart.map(item => ({
    price: item.id, // assuming id is the Stripe price ID
    quantity: item.quantity
  }));

  const checkoutOptions = {
    lineItems: lineItems,
  // [ {
  //       // Provide the exact Price ID (for example, pr_1234) of the product you want to sell
  //       price: 'price_1NOjCxKJeZAyw8f4vRllvFVn',
  //       quantity: 2,
  //     },
  //     {
  //       // Provide the exact Price ID (for example, pr_1234) of the product you want to sell
  //       price: 'price_1MXSxGKJeZAyw8f48U3ApmwS',
  //       quantity: 1,
  //     },
  // ],
    mode: "payment",
    successUrl: `${window.location.origin}/success`,
    cancelUrl: `${window.location.origin}/cancel`
  };
  
  try {
    const { error } = await stripe.redirectToCheckout(checkoutOptions);
    if (error) {
      console.error("Stripe checkout error", error);
      alert(error.message);
    }
  } catch (error) {
    console.error("Error redirecting to Stripe checkout", error);
    alert("An error occurred");
  }
};













  const stripe = Stripe('pk_live_51MNx4UKJeZAyw8f4Lec7u9jtEoGifaJPvGAsW5OOUP3v943UwPN07TloLoOKJPJm85dpGPhGaufUXAU10IepmPVp00Z98Rt01D');

  async function checkout2() {
  try {
    console.log("sennding cart items to server")
    // document.getElementById('overlay1').style.display = 'block';
    hideSidebar();
    const cartItems = JSON.parse(localStorage.getItem('cart'));
    console.log(cartItems);
    // Call your server to create a checkout session
    const response = await fetch('https://dapp-synetic.onrender.com/create-checkout-session', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ cart: cartItems })
    });

    if (!response.ok) throw new Error('Network response was not ok.');

    const session = await response.json();

    // Redirect to Stripe Checkout
    window.location.href = session.url;
  } catch (error) {
    console.error('Error:', error);
  }
}


function qcheckout1() {

    console.log("sennding cart items to server")
    document.getElementById('overlay1').style.display = 'block';
    hideSidebar();
    // Enable the skeleton loader UI for the optimal loading experience.
    const loader = 'auto';
    // const response = await fetch('/checkout');
    const cart = JSON.parse(localStorage.getItem('cart'));
    console.log(cart);
    fetch('https://dapp-synetic.onrender.com/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ cart })
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        alert(data);
        const clientSecret = response.clientSecret;
        const appearance = { /* ... */ };
        // Create an elements group from the Stripe instance, passing the clientSecret (obtained in step 2), loader, and appearance (optional).
        const elements = stripe.elements({clientSecret, appearance, loader});
    
        // Create Element instances
        const expressCheckoutElement = elements.create('expressCheckout', options)
        expressCheckoutElement.mount('#express-checkout-element')
        const linkAuthenticationElement = elements.create("linkAuthentication" , {defaultValues: {email: "foo@bar.com"}});
        const addressElement = elements.create("address", {
            mode: 'shipping',
            defaultValues: {
            name: 'Jane Doe',
            address: {
                line1: '354 Oyster Point Blvd',
                line2: '',
                city: 'South San Francisco',
                state: 'CA',
                postal_code: '94080',
                country: 'US',
        }}});
        // Mount the Element to its corresponding DOM node
        addressElement.mount("#address-element");
    
        const paymentElement = elements.create('payment', {
        defaultValues: {
            billingDetails: {
            name: 'John Doe',
            phone: '888-888-8888',
        },},});
    
        linkAuthenticationElement.on('change', (event) => {
            const email = event.value.email;
        });
    
        addressElement.on('change', (event) => {
            const address = event.value;
        })
    
        linkAuthenticationElement.mount("#link-authentication-element");
        addressElement.mount("#address-element");
        paymentElement.mount("#payment-element");    
        // Render the form using the clientSecret



    })
    .catch(error => {
        console.error('Error:', error);
        alert('connection to payment provider failed');
    });




};

const form = document.getElementById('payment-form');

    form.addEventListener('submit', async (event) => {
    event.preventDefault();

    const {error} = await stripe.confirmPayment({
        elements,
        confirmParams: {
        return_url: "https://example.com/order/123/complete",
        }
    });

    if (error) {
        // Show error to your customer (for example, payment details incomplete)
        console.log(error.message);
    } else {
        // Your customer will be redirected to your `return_url`. For some payment
        // methods like iDEAL, your customer will be redirected to an intermediate
        // site first to authorize the payment, then redirected to the `return_url`.
    }
    });
</script>
    <div class="login" id="login" onclick="showOverlay()">Login / Sign up</div>
    <div class="mobile-icons">
      <a href="https://www.tiktok.com/@varity.club?is_from_webapp=1&sender_device=pc" target="_blank"><i class="fab fa-tiktok"></i></a>
      <a href="https://www.instagram.com/varityclothes?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank"><i class="fab fa-instagram"></i></a>
      <a id="#show-cart" onclick="showSidebar()"><i class="fa fa-shopping-bag" ></i></a>
      <a ><i class="far fa-shopping-bag" id="show-cart"></i></a>
    </div>
    <div class="navbar">
      <a  class="logo">VARITY</a>
      <!-- <img class="img" src="man.png" alt="Watch 1"> -->
      <!-- <div class="row">

          <span class="flag-icon flag-icon-gb flag-icon-squared"></span>
        <a href="#">United Kingdom</a>
      </div> -->
      <div class="middle">
          <div class="navbar-brand">
              <!-- <a href="#" class="logo">VARITY</a> -->
              
            </div>
          <div class="navbar-links">
          
            <a href="#">HOME</a>
            
            <a href="Varity.html#highlights">HIGHLIGHTS</a>
            <a href="Varity.html#catalogue">CLOTHING</a>
            <a href="https://www.syneticx.com">STORE</a>
            <a href="Varity.html#story">STORY</a>
            <a href="https://www.instagram.com/varityclothes?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank">INSTAGRAM</a>
            <!-- <a href="#"><i class="fas fa-search"></i></a> -->
          </div>
    </div>


    <div class="navbar-icons">
      <!-- <a href="#"><i class="far fa-heart"></i></a> -->
      <!-- <a href="#"><i class="far fa-user"></i></a> -->
      <a href="https://www.tiktok.com/@varity.club?is_from_webapp=1&sender_device=pc" target="_blank"><i class="fab fa-tiktok"></i></a>
      <a href="https://www.instagram.com/varityclothes?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank"><i class="fab fa-instagram"></i></a>
      <a id="#show-cart" onclick="showSidebar()"><i class="fa fa-shopping-bag" ></i></a>
      <!-- <a ><i class="far fa-shopping-bag" id="show-cart"></i></a> -->
    </div>
  </div>

  <div id="menuToggle" onclick="menu()">
    <input type="checkbox" />
    <span></span>
    <span></span>
    <span></span>
</div>

<div id="menuOverlay">
    <nav id="menuNav">
        <ul>
          <li><a href="Varity.html#highlights">HIGHLIGHTS</a></li>
          <li><a href="Varity.html#catalogue">CLOTHING</a></li>
          <li><a href="https://www.syneticx.com">STORE</a></li>
          <li><a href="Varity.html#story">STORY</a></li>
          <li><a href="https://www.instagram.com/varityclothes?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank">INSTAGRAM</a></li>
            <li ><a href="#signin" id="signInGoogle" class="buttonnavmobile">Sign in with Google</a>
              <a href="#signin" id="signInNormal" class="buttonnavmobile">Sign in</a></li>
            <!-- <li></li> -->
        </ul>
    </nav>
</div>

<!-- Form Overlay -->
<div id="formOverlay" class="overlay">
  <div class="form-container glass">
    <form id="loginForm">
      <!-- Switch between Login, Register, and Reset Password -->
      <div class="switch-form">
        <span id="loginTab" class="form-tab active" onclick="switchForm('login')">Login</span>
        <span id="registerTab" class="form-tab" onclick="switchForm('register')">Register</span>
        <span id="resetTab" class="form-tab" onclick="switchForm('reset')">Reset Password</span>
        <span  onclick="closeForm()">close login</span>
      </div>
      <!-- Form Content will be populated by JavaScript -->
      <div id="formContent">
        <!-- Content dynamically generated by JavaScript -->
      </div>
      <button type="submit" class="btn" id="formButton">Login</button>
      
      <button class="btn" id="rformButton" onclick="register()">Sign up</button>
      <p class="form-footer" id="formFooter">
        Forgot password? or <span id="switchAction">Sign up</span>
        
      </p>
      <div id="message"></div>
    </form>
  </div>
</div>




<script>

    const menuToggleInput = document.querySelector('#menuToggle input');
    const menuOverlay = document.getElementById('menuOverlay');
    var open = false;
    // menuToggleInput.addEventListener('change', 
    function menu() {
        console.log("menu", open)
        if(!open) {
            // When the checkbox is checked, show the menu
            menuOverlay.style.display = 'block';
            menuOverlay.style.opacity = '1';
            open = true;
        } else {
            // When the checkbox is not checked, hide the menu
            menuOverlay.style.opacity = '0';
            setTimeout(() => {
                menuOverlay.style.display = 'none';
            }, 500); // Corresponds to the transition duration
            open = false;
        }

    // 
  }
    // );

document.addEventListener('DOMContentLoaded', function() {
    // Function to switch tabs in the form
    function switchForm(tab) {
        var formTabs = document.querySelectorAll('.form-tab');
        formTabs.forEach(function(tab) {
            tab.classList.remove('active');
        });
        var tabElement = document.getElementById(tab + 'Tab');
        tabElement.classList.add('active');

        // Here you should handle the display of the respective form content
        // for simplicity, it is not included
    }

    // Attach the switchForm function to the tabs
    document.getElementById('loginTab').addEventListener('click', function() { switchForm('login'); });
    document.getElementById('registerTab').addEventListener('click', function() { switchForm('register'); });
    document.getElementById('resetTab').addEventListener('click', function() { switchForm('reset'); });

    // Function to handle the form submission
    document.getElementById('accountForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission

        var email = document.getElementById('email').value;
        var privacyPolicy = document.getElementById('privacyPolicy').checked;
        
        // Simple email validation
        if (!email || !validateEmail(email)) {
            alert('Please enter a valid email address.');
            return;
        }

        // Check if privacy policy is checked
        if (!privacyPolicy) {
            alert('Please agree to the privacy policy.');
            return;
        }

        // Here, you would typically make an AJAX request to your server
        console.log('Form submitted with:', email);

        // For now, let's just close the overlay
        closeOverlay();
    });

    // Function to validate email
    function validateEmail(email) {
        var re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(String(email).toLowerCase());
    }

    // Function to open the overlay
    function openOverlay() {
        document.getElementById('overlay').style.display = 'block';
    }

    // Function to close the overlay
    function closeOverlay() {
        document.getElementById('overlay').style.display = 'none';
    }

    // Close the overlay when clicking outside the form container
    document.getElementById('overlay').addEventListener('click', function(event) {
        if (event.target == this) { // If the direct target of the click is the overlay background
            closeOverlay();
        }
    });

    // Example call to open the overlay, you can trigger this however you need
    openOverlay();
});



function closeForm() {
  const formOverlay = document.getElementById('formOverlay');
    formOverlay.style.display = 'none';
}

  function switchForm(state) {
  const emailGroup = `
    <div class="form-group">
      <input type="email" id="Email" placeholder="Email Address" required>
    </div>`;
  const passwordGroup = `
    <div class="form-group">
      <input type="password" id="Password" placeholder="Password" required>
    </div>`;
  const confirmPasswordGroup = `
    <div class="form-group">
      <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
    </div>`;

  const formContent = document.getElementById('formContent');
  const formButton = document.getElementById('formButton');
  const registerformButton = document.getElementById('rformButton');
  const formFooter = document.getElementById('formFooter');
  const loginTab = document.getElementById('loginTab');
  const registerTab = document.getElementById('registerTab');
  const resetTab = document.getElementById('resetTab');

  // Reset all tabs to inactive state
  loginTab.classList.remove('active');
  registerTab.classList.remove('active');
  resetTab.classList.remove('active');
  registerformButton.style.display = 'none';
  formButton.style.display = 'none';

  // Handle different states
  if (state === 'login') {
    console.log(state);
    formButton.style.display = 'flex';
    registerformButton.style.display = 'none';

    formContent.innerHTML = emailGroup + passwordGroup;
    formButton.innerText = 'Login';
    formButton.type = "submit";
    formFooter.innerHTML = 'Forgot password? or <span id="switchAction" onclick="switchForm(\'register\')">Sign up</span>';
    loginTab.classList.add('active');
  } else if (state === 'register') {
    console.log(state);
    registerformButton.style.display = 'flex';
    formButton.style.display = 'none';

    formContent.innerHTML = emailGroup + passwordGroup + confirmPasswordGroup;
    formButton.innerText = 'Create Account';
    formButton.type = "regiser";
    formFooter.innerHTML = 'Already have an account? <span id="switchAction" onclick="switchForm(\'login\')">Login</span>';
    registerTab.classList.add('active');
  } else if (state === 'reset') {
    console.log(state);
    formContent.innerHTML = emailGroup;
    formButton.innerText = 'Reset Password';
    formButton.type = "reset";
    formFooter.innerHTML = 'Back to <span id="switchAction" onclick="switchForm(\'login\')">Login</span>';
    resetTab.classList.add('active');
  }
}

// Initialize the form with the login state
switchForm('login');

</script>

	<div id="close-cart-btn" class="close-cart-btn" onclick="hideSidebar()">
		<span class="close-cart-text">Close Cart</span>
		<i class="fas fa-times close-cart-icon"></i>
    
	  </div>
<!-- Sidebar Cart -->
<div id="cart-sidebar" class="cart-sidebar">
<style>
  /* .cart-sidebar .cart-item{
    display: none;
  } */
  .cart-sidebar h3{
    display: block;
  }

</style>
<div class="title">
  <!-- <i class="fa-solid fa-backward" ></i> -->
  <i class="fas fa-chevron-left i" onclick="hideSidebar()"></i>
  <h1>Your Cart</h1>

</div>
<!-- <h1>Your Cart</h1> -->
	<!-- Cart Item 1 -->
	<!-- <div class="cart-item" id="yourElementId">
    <div>
	  <img src="tee.jpeg" alt="Armani Shirt" class="cart-item-image">
    <button class="remove-item">Remove</button>
  </div>
	  <div class="cart-item-details">
		<p class="item-brand">VARITY</p>
		<p class="item-name">Originals collective T-shirt</p>
		<p class="item-price">Â£25</p>
		<p class="item-attributes">Colour: Black<br>Size: S<br>Quantity: 1</p>
		
	  </div>
	</div> -->
  <!-- <h3 id="#h3">Cart is empty</h3> -->
  <h3 id="empty-cart-message" style="display: none;">Your cart is empty</h3>
	
	<!-- Cart Item 2
	<div class="cart-item">
	  <img src="path/to/gucci-bag.jpg" alt="Gucci Bag" class="cart-item-image">
	  <div class="cart-item-details">
		<p class="item-brand">GUCCI</p>
		<p class="item-name">JACKIE NOTTE MINI BAG</p>
		<p class="item-price">Â£2,630</p>
		<p class="item-attributes">Style: 782889 OP50G 6207<br>Quantity: 1</p>
		<button class="remove-item">Remove</button>
	  </div>
	</div> -->

  <div id="cartItems"></div>
  <h4 onclick="clearCart()">Clear Cart</h4>
	<!-- Checkout Button -->
	<div class="checkout-container">
	  <button id="checkout-button" onclick="redirectToCheckout()">CHECKOUT</button>
	</div>
  </div>
  
	  

		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->

      <!-- Add this inside the <body> tag -->
<div class="content-wrapper">
  <div id="top" class="top"></div> <!-- Container for the 3D object -->
  <button class="buy-button" onclick="buybutton()">Buy Now</button> <!-- Buy button -->
</div>

<script>
function clearCart() {
  localStorage.removeItem('cart');
displayCart();
}
  // Utility function to get cart from localStorage
function getCart() {
  const cart = localStorage.getItem('cart');
  return cart ? JSON.parse(cart) : [];
}

// Utility function to save cart to localStorage
function saveCart(cart) {
  localStorage.setItem('cart', JSON.stringify(cart));
}

// Function to add an item to the cart
function addToCart(item) {
  const cart = getCart();
  const index = cart.findIndex(cartItem => cartItem.id === item.id);
  if (index !== -1) {
    // Item already in cart, update quantity
    cart[index].quantity += item.quantity;
  } else {
    // Add new item to cart
    cart.push(item);
  }
  saveCart(cart);
}

function remove() {
  removeFromCart({
      id: "price_1NOjCxKJeZAyw8f4vRllvFVn",
      name: "Varity Originals Tee",
      price: 25,
      quantity: 1 // Default to 1, adjust as necessary
    });
}
// Function to remove an item from the cart
function removeFromCart(item) {
  const cart = getCart();
  const index = cart.findIndex(cartItem => cartItem.id === item.id);
  if (index !== -1) {


    if(cart[index].quantity > 1)
    {

      cart[index].quantity -= 1;
      displayCart();

      if(cart[index].quantity < 1)
      {
        clearCart();
      }

    }
    else{
        clearCart();
        displayCart();
    }



  } else {
    // Add new item to cart
    return;
  }
  saveCart(cart);
  displayCart();
}

function buybutton() {
    const productId = "price_1NOjCxKJeZAyw8f4vRllvFVn";
    // Assuming you have a function to get product details by ID
    // const product = getProductDetails(productId);

    addToCart({
      id: "price_1NOjCxKJeZAyw8f4vRllvFVn",
      name: "Varity Originals Tee",
      price: 25,
      quantity: 1 // Default to 1, adjust as necessary
    });
    // Optionally, update the cart display here
    showSidebar();
  };

  function displayCart() {
  const cartItems = getCart();
  const cartContainer = document.getElementById('cartItems');
  const emptyCartMessage = document.getElementById('empty-cart-message');
  cartContainer.innerHTML = ''; // Clear current cart contents
  if (cartItems.length === 0) {
    // If there are no cart items, show the "empty cart" message
    emptyCartMessage.style.display = 'block';
  } else {
  cartItems.forEach(item => {
    const cartItemElement = document.createElement('div');
    cartItemElement.innerHTML = `

  <div class="cart-item" id="yourElementId" data-id="${item.id}">
  <img src="images/actual.png" alt="Nice Mini Toiletry Bag" class="cart-item-image">
  <div class="cart-item-details">
    <p class="item-code">${item.id}</p>
    <p class="item-name">${item.name}</p>
    <p class="item-attributes">Colour: Red</p>
    <p class="item-price">Â£${item.price}</p>
    <div class="cart-item-actions">
      <label for="item-quantity-${item.id}" class="quantity-label">Quantity:${item.quantity}</label>
      
      
    </div>
    <button class="remove-item-btn" onclick="remove()">Remove</button>
  </div>
</div>

    `;
    cartContainer.appendChild(cartItemElement);
  });
}

}

// Call displayCart to update the cart display when needed
displayCart();

document.getElementById('cart-container').addEventListener('click', function(event) {
  if (event.target.classList.contains('remove-item-btn')) {
    const itemId = event.target.getAttribute('data-id');
    removeFromCart(itemId);
    displayCart(); // Refresh cart display
  }
});

// Similar event listeners can be set up for quantity changes



</script>
    <script>
var userEmail = "uninitialised";
const userId = userEmail; // Replace with the actual user ID

function showSidebar() {
  // fetchCartItems(userId)
  displayCart();
	console.log("// Set transform to 0% to show the sidebar")
  document.getElementById('cart-sidebar').style.transform = 'translateX(0%)';
  var closeCartBtn = document.getElementById('close-cart-btn');
  closeCartBtn.style.display = 'flex'; // This will change the display to flex

}


function hideSidebar() {
	console.log("// Set transform to 0% to show the sidebar")
  document.getElementById('cart-sidebar').style.transform = 'translateX(100%)';
  var closeCartBtn = document.getElementById('close-cart-btn');
  closeCartBtn.style.display = 'none'; // This will change the display to flex
}

function showOverlay() {

    const formOverlay = document.getElementById('formOverlay');
    formOverlay.style.display = 'flex';
    // Show the overlay with the form
  }



  // Login User
document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('Email').value;
    const password = document.getElementById('Password').value;
console.log("login account clicked ", JSON.stringify({ email, password }));
    fetch('https://dapp-synetic.onrender.com/login-varity', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password })
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        // alert(data);
        userEmail = email;
        const loginButton = document.getElementById('login');
        console.log(data);
        loginButton.innerText = data.walletAddress;
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Login failed');
    });
});

document.getElementById('Password').addEventListener('input', validatePassword);
document.getElementById('confirmPassword').addEventListener('input', validatePassword);

function validatePassword() {
  const password = document.getElementById('Password').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  const submitBtn = document.getElementById('formButton');

  if (password !== confirmPassword) {
    submitBtn.disabled = true; // Disable the submit button
    // Optionally, alert the user that the passwords do not match
    document.getElementById('message').textContent = 'Passwords do not match.';
  } else {
    submitBtn.disabled = false; // Enable the submit button
    document.getElementById('message').textContent = ''; // Clear the message
  }
}



// document.getElementById('loginForm').addEventListener('regiser', function(event) {
  function register(){
  event.preventDefault(); // Prevent the form from submitting the traditional way

  const email = document.getElementById('Email').value;
  const password = document.getElementById('confirmPassword').value;

  console.log("create account clicked ", JSON.stringify({ email, password }));

  fetch('https://dapp-synetic.onrender.com/create-varity-account', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      // Add your authentication headers if necessary
    },
    body: JSON.stringify({ email, password }) // Convert the payload to JSON
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    if (data.error) {
      displayMessage(data.error); // Display error if the user already exists
    } else {
      alert(`Account created for ${data.email}`);
      displayMessage(`Account created for ${data.email}`);
      userEmail = data.email;
      const loginButton = document.getElementById('login');
      console.log(data);
        loginButton.innerText = data.walletAddress;
      // You can redirect the user or update the UI as needed
    }
  })
  .catch(error => {
    displayMessage(`An error occurred: ${error.message}`);
  });
}
// });


function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
  email = profile.getEmail();
  userEmail = email;

  fetch('http://localhost:3000/create-varity-account', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      // Add your authentication headers if necessary
    },
    body: JSON.stringify({ email }) // Convert the payload to JSON
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    if (data.error) {
      displayMessage(data.error); // Display error if the user already exists
    } else {
      displayMessage(`Account created for ${data.email}`);
      // You can redirect the user or update the UI as needed
    }
  })
  .catch(error => {
    displayMessage(`An error occurred: ${error.message}`);
  });


}

function displayMessage(message) {
  document.getElementById('message').textContent = message;
}


		</script>
		
		<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.137.0/build/three.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/controls/OrbitControls.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/loaders/GLTFLoader.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/loaders/RGBELoader.js"></script>
		
		<script type="importmap">
			{
				"imports": {
					"three": "../build/three.module.js",
					"three/addons/": "./jsm/"
				}
			}
		</script>
		<script type="module" src="threejs.js">

// import * as THREE from 'https://cdn.skypack.dev/three@0.129.0/build/three.module.js';
// import { OrbitControls } from 'https://cdn.skypack.dev/three@0.132.2/examples/jsm/controls/OrbitControls.js';
// import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/GLTFLoader.js';
//     import { RGBELoader } from 'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/RGBELoader.js';

// 			let camera, scene, renderer;

// 			init();
// 			render();

// 			function init() {

// 				const container = document.createElement( 'div' );
// 				document.body.appendChild( container );

// 				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.25, 20 );
// 				camera.position.set( - 1.8, 0.6, 2.7 );

// 				scene = new THREE.Scene();

// 				new RGBELoader()
// 					.setPath( 'textures/equirectangular/' )
// 					.load( 'royal_esplanade_1k.hdr', function ( texture ) {

// 						texture.mapping = THREE.EquirectangularReflectionMapping;

// 						scene.background = texture;
// 						scene.environment = texture;

// 						render();

// 						// model

// 						const loader = new GLTFLoader().setPath( 'models/DamagedHelmet/glTF/' );
// 						loader.load( 'DamagedHelmet.gltf', function ( gltf ) {

// 							scene.add( gltf.scene );

// 							render();

// 						} );

// 					} );

// 				renderer = new THREE.WebGLRenderer( { antialias: true } ); 
			// 	renderer.setPixelRatio( window.devicePixelRatio );
			// 	renderer.setSize( window.innerWidth, window.innerHeight );
			// 	renderer.toneMapping = THREE.ACESFilmicToneMapping;
			// 	renderer.toneMappingExposure = 1;
			// 	renderer.outputColorSpace = THREE.SRGBColorSpace;
			// 	container.appendChild( renderer.domElement );

			// 	const controls = new OrbitControls( camera, renderer.domElement );
			// 	controls.addEventListener( 'change', render ); // use if there is no animation loop
			// 	controls.minDistance = 2;
			// 	controls.maxDistance = 10;
			// 	controls.target.set( 0, 0, - 0.2 );
			// 	controls.update();

			// 	window.addEventListener( 'resize', onWindowResize );

			// }

			// function onWindowResize() {

			// 	camera.aspect = window.innerWidth / window.innerHeight;
			// 	camera.updateProjectionMatrix();

			// 	renderer.setSize( window.innerWidth, window.innerHeight );

			// 	render();

			// }

			// //

			// function render() {

			// 	renderer.render( scene, camera );

			// }

		</script>

	</body>
</html>
